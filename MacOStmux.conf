# ---------------------
# Copy & Paste
# ---------------------
# For tmux 2.6+, native clipboard support works without reattach-to-user-namespace
# Fallback to reattach-to-user-namespace if available for older versions
if-shell "command -v reattach-to-user-namespace >/dev/null" \
  "set-option -g default-command 'reattach-to-user-namespace -l zsh'" \
  "set-option -g default-shell /bin/zsh"

set-window-option -g automatic-rename on

# copy mode bindings with clipboard integration
bind-key -T copy-mode-vi v send-keys -X begin-selection
bind-key -T copy-mode-vi y send-keys -X copy-pipe-and-cancel 'pbcopy'

# update default binding of 'Enter' to also use copy-pipe
unbind -T copy-mode-vi Enter
bind-key -T copy-mode-vi Enter send-keys -X copy-pipe-and-cancel 'pbcopy'

bind y run 'tmux save-buffer - | pbcopy'
bind C-y run 'tmux save-buffer - | pbcopy'

# paste from system clipboard
bind p run 'pbpaste | tmux load-buffer - && tmux paste-buffer'

set-option -g set-titles on
set-option -g set-titles-string '#S: #W'
